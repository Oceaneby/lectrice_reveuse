{% extends 'base.html.twig' %}

{% block title %}Modifier mon profil{% endblock %}

{% block body %}
<div class="max-w-4xl mx-auto p-6 bg-white shadow-lg rounded-lg">
    <h1 class="text-3xl font-semibold text-center mb-6">Modifier mon profil</h1>

    <!-- Photo de profil -->
    <div class="flex justify-center mb-6">
        {% if app.user.profilPicture is not null %}
            <img src="{{ asset('uploads/profil_pictures/' ~ app.user.profilPicture.imageUrl) }}" alt="Photo de profil" class="w-32 h-32 rounded-full object-cover border-2 border-gray-300">
        {% else %}
            <div class="w-32 h-32 rounded-full bg-gray-300 flex items-center justify-center text-white text-xl font-semibold">
                <span>Aucune</span>
            </div>
        {% endif %}
    </div>

    <!-- Formulaire de modification -->
    <div class="bg-gray-100 p-6 rounded-lg shadow-md">
        {{ form_start(form) }}
        
        <div class="mb-6">
            <label for="{{ form.first_name.vars.id }}" class="block text-lg font-medium text-gray-700 mb-2">Prénom</label>
            {{ form_widget(form.first_name, {'attr': {'class': 'form-input w-full p-3 border rounded-md border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500'}}) }}
        </div>

        <div class="mb-6">
            <label for="{{ form.last_name.vars.id }}" class="block text-lg font-medium text-gray-700 mb-2">Nom</label>
            {{ form_widget(form.last_name, {'attr': {'class': 'form-input w-full p-3 border rounded-md border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500'}}) }}
        </div>

        <div class="mb-6">
            <label for="{{ form.username.vars.id }}" class="block text-lg font-medium text-gray-700 mb-2">Nom d'utilisateur</label>
            {{ form_widget(form.username, {'attr': {'class': 'form-input w-full p-3 border rounded-md border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500'}}) }}
        </div>

        <div class="mb-6">
            <label for="{{ form.email.vars.id }}" class="block text-lg font-medium text-gray-700 mb-2">Email</label>
            {{ form_widget(form.email, {'attr': {'class': 'form-input w-full p-3 border rounded-md border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500'}}) }}
        </div>

        <div class="mb-6">
            <label class="block text-lg font-medium text-gray-700 mb-2">Mot de passe</label>
            {{ form_widget(form.password, {'attr': {'class': 'form-input w-full p-3 border rounded-md border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500'}, 'value': ''}) }}
        </div>

         <div class="mb-6">
            <label class="block text-lg font-medium text-gray-700 mb-2">Date de naissance</label>
            <div class="p-3 bg-gray-100 border rounded-md text-gray-600">{{ app.user.birthDate ? app.user.birthDate|date('d-m-Y') : 'Non renseignée' }}</div>
        </div>

        <div class="mb-6">
            <label for="{{ form.profilPicture.vars.id }}" class="block text-lg font-medium text-gray-700 mb-2">Photo de profil</label>
            {{ form_widget(form.profilPicture, {'attr': {'class': 'form-input w-full p-3 border rounded-md border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500'}}) }}
        </div>

        <div class="flex justify-center mt-6">
            <button type="submit" class="px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition duration-200 ease-in-out">
                Enregistrer les modifications
            </button>
        </div>

        {{ form_end(form) }}
    </div>
</div>
{% endblock %}